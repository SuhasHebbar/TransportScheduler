#!/bin/bash
########################
# Purpose: install the necessary project dependencies and create working environment
# Author: Prasad Talasila
# Date: 10-April-2017
# Invocation: This script does not require any arguements. From the project top-level
#             directory, invoke as follows
#             $bash script/bootstrap
########################

set -e      # bail out on failure

sudo apt -y install git

git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.3.0
# shellcheck disable=SC2016
echo -e '\n. $HOME/.asdf/asdf.sh' >> ~/.bashrc
# shellcheck disable=SC2016
echo -e '\n. $HOME/.asdf/completions/asdf.bash' >> ~/.bashrc
source ~/.bashrc

sudo apt-get install -y automake autoconf libreadline-dev libncurses-dev libssl-dev libyaml-dev \
  libxslt-dev libffi-dev libtool unixodbc-dev make zip

asdf plugin-add erlang https://github.com/asdf-vm/asdf-erlang.git
asdf list-all erlang
asdf install erlang 19.0
asdf list erlang
asdf global erlang 19.0

asdf plugin-add elixir https://github.com/asdf-vm/asdf-elixir.git
asdf list-all elixir
asdf install elixir 1.3.4
asdf list elixir
asdf global elixir 1.3.4
